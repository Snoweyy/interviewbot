<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mock Interview Bot â€” Dashboard</title>
  <meta name="description" content="AI-powered mock interview platform. Practice for your next big interview." />
  <link rel="stylesheet" href="css/style.css" />
  <style>
    .row2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    @media(max-width:520px){ .row2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
<div class="page-wrap">
  <div class="card fade-up">
    <div class="logo-area">
      <div class="logo-icon">ðŸŽ¯</div>
      <h1>MockMind AI</h1>
      <p>Your AI-powered interview coach</p>
    </div>

    <div id="error-box" class="alert alert-error" style="display:none"></div>

    <form id="dashboard-form">
      <div class="form-group">
        <label>Interview Field / Role *</label>
        <input type="text" id="field" placeholder="e.g. Python Developer, Data Science, HR Manager" required />
      </div>

      <div class="row2">
        <div class="form-group">
          <label>Total Questions *</label>
          <input type="number" id="total" min="3" max="20" value="5" required />
        </div>
        <div class="form-group">
          <label>Max Time (minutes) *</label>
          <input type="number" id="maxtime" min="5" max="120" value="20" required />
        </div>
      </div>

      <div class="form-group">
        <label>Interview Level *</label>
        <select id="level" required>
          <option value="">â€” Select Level â€”</option>
          <option value="Beginner">ðŸŸ¢ Beginner</option>
          <option value="Intermediate">ðŸŸ¡ Intermediate</option>
          <option value="Advanced">ðŸ”´ Advanced</option>
        </select>
      </div>

      <div class="form-group">
        <label>Upload Resume (PDF)</label>
        <div class="upload-area" id="upload-area">
          <input type="file" id="resume" accept=".pdf" />
          <div class="upload-icon">ðŸ“„</div>
          <p>Click to upload or drag & drop your resume</p>
          <p style="font-size:0.75rem;margin-top:0.2rem;color:var(--text3)">PDF only</p>
          <div class="file-name" id="file-name" style="display:none"></div>
        </div>
      </div>

      <button type="submit" class="btn btn-primary btn-full" id="start-btn">
        Start Interview Setup â†’
      </button>
    </form>
  </div>
</div>

<script>
  // File upload display
  document.getElementById('resume').addEventListener('change', function() {
    const fname = this.files[0]?.name;
    const el = document.getElementById('file-name');
    if (fname) { el.textContent = 'âœ… ' + fname; el.style.display = 'block'; }
  });

  // Drag & drop
  const ua = document.getElementById('upload-area');
  ua.addEventListener('dragover', e => { e.preventDefault(); ua.classList.add('drag-over'); });
  ua.addEventListener('dragleave', () => ua.classList.remove('drag-over'));
  ua.addEventListener('drop', e => {
    e.preventDefault(); ua.classList.remove('drag-over');
    const f = e.dataTransfer.files[0];
    if (f && f.type === 'application/pdf') {
      document.getElementById('resume').files = e.dataTransfer.files;
      const el = document.getElementById('file-name');
      el.textContent = 'âœ… ' + f.name; el.style.display = 'block';
    }
  });

  document.getElementById('dashboard-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    const errBox = document.getElementById('error-box');
    errBox.style.display = 'none';

    const field = document.getElementById('field').value.trim();
    const total = parseInt(document.getElementById('total').value);
    const maxtime = parseInt(document.getElementById('maxtime').value);
    const level = document.getElementById('level').value;
    const resumeFile = document.getElementById('resume').files[0];

    if (!field || !level) {
      errBox.textContent = 'Please fill in all required fields.';
      errBox.style.display = 'block';
      return;
    }

    // Save config to sessionStorage
    const config = { field, total, maxtime, level };
    sessionStorage.setItem('interviewConfig', JSON.stringify(config));

    // Save resume file reference by uploading now
    if (resumeFile) {
      sessionStorage.setItem('resumeFileName', resumeFile.name);
      // Store as base64
      const reader = new FileReader();
      reader.onload = function(ev) {
        sessionStorage.setItem('resumeBase64', ev.target.result);
        window.location.href = 'checkin.html';
      };
      reader.readAsDataURL(resumeFile);
    } else {
      sessionStorage.removeItem('resumeBase64');
      window.location.href = 'checkin.html';
    }
  });
</script>
</body>
</html>
